{"version":3,"file":"index-CvK50Vq-.js","sources":["../../src/assets.ts","../../assets/character.png","../../assets/enemy.png","../../assets/game_map/background.png","../../src/main.ts"],"sourcesContent":["export class ImageAsset {\n  private image: HTMLImageElement;\n  private loaded = false;\n  constructor(public src: string) {\n    this.image = new Image();\n    this.image.decoding = 'async';\n    this.image.onload = () => { this.loaded = true; };\n    this.image.onerror = () => { this.loaded = false; };\n    this.image.src = src;\n    if (this.image.complete) {\n      // For cached images the onload may not fire if listener attached late\n      this.loaded = true;\n    }\n  }\n  isReady(): boolean { return this.loaded; }\n  get(): HTMLImageElement { return this.image; }\n}\n\nexport class ThunderAudio {\n  private ctx: AudioContext | null = null;\n  private master: GainNode | null = null;\n  private chimeBuffer: AudioBuffer | null = null;\n  private ensure(): void {\n    if (!this.ctx) {\n      const ctx = new (window.AudioContext || (window as any).webkitAudioContext)();\n      const g = ctx.createGain();\n      g.gain.value = 0.25;\n      g.connect(ctx.destination);\n      this.ctx = ctx; this.master = g;\n    }\n  }\n  playThunder(): void {\n    this.ensure();\n    if (!this.ctx || !this.master) return;\n    const ctx = this.ctx;\n    // noise burst\n    const bufferSize = 2 * ctx.sampleRate;\n    const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const output = noiseBuffer.getChannelData(0);\n    for (let i = 0; i < bufferSize; i++) {\n      output[i] = (Math.random() * 2 - 1) * (1 - i / bufferSize);\n    }\n    const noise = ctx.createBufferSource();\n    noise.buffer = noiseBuffer;\n    const filter = ctx.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.value = 600 + Math.random() * 400;\n    const g = ctx.createGain();\n    g.gain.setValueAtTime(0.001, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.6, ctx.currentTime + 0.02);\n    g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 2.2);\n    noise.connect(filter).connect(g).connect(this.master);\n    noise.start();\n    noise.stop(ctx.currentTime + 2.3);\n  }\n  playChime(): void {\n    this.ensure();\n    if (!this.ctx || !this.master) return;\n    const o = this.ctx.createOscillator();\n    const g = this.ctx.createGain();\n    o.type = 'sine';\n    o.frequency.setValueAtTime(880, this.ctx.currentTime);\n    o.frequency.exponentialRampToValueAtTime(1320, this.ctx.currentTime + 0.12);\n    g.gain.setValueAtTime(0.0001, this.ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.35, this.ctx.currentTime + 0.02);\n    g.gain.exponentialRampToValueAtTime(0.0001, this.ctx.currentTime + 0.6);\n    o.connect(g).connect(this.master);\n    o.start();\n    o.stop(this.ctx.currentTime + 0.65);\n  }\n}\n\n\n","export default \"__VITE_ASSET__CvbVu$xJ__\"","export default \"__VITE_ASSET__CoOgLIoF__\"","export default \"__VITE_ASSET__BYrNh9wI__\"","/*\n  Top-down shooter core.\n  - WASD movement, mouse aim, LMB shoot (shotgun)\n  - Enemies spawn from edges, chase player (doctors)\n  - Particles, screenshake, audio, HUD, pause\n  - Rain and thunder visual/audio effects\n*/\nimport { ImageAsset, ThunderAudio } from './assets';\n// PNG assets and collision grid\n// Vite will bundle these and return URLs/objects we can use at runtime\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport characterPngUrl from '../assets/character.png';\n// @ts-ignore\nimport enemyPngUrl from '../assets/enemy.png';\n// @ts-ignore\nimport backgroundPngUrl from '../assets/game_map/background.png';\n// collision grid removed per latest requirements (free movement)\n\ntype Vec2 = { x: number; y: number };\n\nfunction clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction length(v: Vec2): number {\n  return Math.hypot(v.x, v.y);\n}\n\nfunction normalize(v: Vec2): Vec2 {\n  const len = length(v) || 1;\n  return { x: v.x / len, y: v.y / len };\n}\n\nfunction add(a: Vec2, b: Vec2): Vec2 {\n  return { x: a.x + b.x, y: a.y + b.y };\n}\n\nfunction sub(a: Vec2, b: Vec2): Vec2 {\n  return { x: a.x - b.x, y: a.y - b.y };\n}\n\nfunction mul(v: Vec2, s: number): Vec2 {\n  return { x: v.x * s, y: v.y * s };\n}\n\nfunction rand(min: number, max: number): number {\n  return Math.random() * (max - min) + min;\n}\n\nfunction randInt(min: number, max: number): number {\n  return Math.floor(rand(min, max));\n}\n\nfunction lerp(a: number, b: number, t: number): number {\n  return a + (b - a) * t;\n}\n\n// Audio helpers\nclass AudioEngine {\n  private ctx: AudioContext | null = null;\n  private master: GainNode | null = null;\n  private mute = false;\n\n  private ensure(): void {\n    if (!this.ctx) {\n      const ctx = new (window.AudioContext || (window as any).webkitAudioContext)();\n      const master = ctx.createGain();\n      master.gain.value = 0.15;\n      master.connect(ctx.destination);\n      this.ctx = ctx;\n      this.master = master;\n    }\n  }\n\n  toggleMute(): void {\n    this.mute = !this.mute;\n    if (this.master) this.master.gain.value = this.mute ? 0 : 0.15;\n  }\n\n  playShot(): void {\n    this.ensure();\n    if (!this.ctx || !this.master) return;\n    const o = this.ctx.createOscillator();\n    const g = this.ctx.createGain();\n    o.type = 'square';\n    o.frequency.value = 440 + rand(-40, 40);\n    g.gain.setValueAtTime(0.4, this.ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.08);\n    o.connect(g).connect(this.master);\n    o.start();\n    o.stop(this.ctx.currentTime + 0.1);\n  }\n\n  playHit(): void {\n    this.ensure();\n    if (!this.ctx || !this.master) return;\n    const o = this.ctx.createOscillator();\n    const g = this.ctx.createGain();\n    o.type = 'sawtooth';\n    o.frequency.value = 120 + rand(-20, 20);\n    g.gain.setValueAtTime(0.3, this.ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.15);\n    o.connect(g).connect(this.master);\n    o.start();\n    o.stop(this.ctx.currentTime + 0.18);\n  }\n\n  playWave(): void {\n    this.ensure();\n    if (!this.ctx || !this.master) return;\n    const o = this.ctx.createOscillator();\n    const g = this.ctx.createGain();\n    o.type = 'triangle';\n    o.frequency.value = 220;\n    g.gain.setValueAtTime(0.001, this.ctx.currentTime);\n    g.gain.linearRampToValueAtTime(0.22, this.ctx.currentTime + 0.03);\n    g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.4);\n    o.connect(g).connect(this.master);\n    o.start();\n    o.stop(this.ctx.currentTime + 0.45);\n  }\n\n  playDeath(): void {\n    this.ensure();\n    if (!this.ctx || !this.master) return;\n    const o = this.ctx.createOscillator();\n    const g = this.ctx.createGain();\n    o.type = 'square';\n    o.frequency.setValueAtTime(200, this.ctx.currentTime);\n    o.frequency.exponentialRampToValueAtTime(40, this.ctx.currentTime + 0.4);\n    g.gain.setValueAtTime(0.4, this.ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.4);\n    o.connect(g).connect(this.master);\n    o.start();\n    o.stop(this.ctx.currentTime + 0.45);\n  }\n}\n\n// Core game types\ntype Bullet = { pos: Vec2; vel: Vec2; life: number; damage: number };\ntype Enemy = { pos: Vec2; vel: Vec2; speed: number; hp: number; maxHp: number; radius: number; spawnFx: number };\ntype Particle = { pos: Vec2; vel: Vec2; life: number; color: string; size: number };\ntype Pickup = { pos: Vec2; radius: number; kind: 'medkit' | 'damage' };\ntype FloatingText = { pos: Vec2; vel: Vec2; life: number; text: string; color: string };\n\nclass RNG {\n  constructor(private seed: number) {}\n  next(): number {\n    // xorshift32\n    let x = this.seed | 0;\n    x ^= x << 13;\n    x ^= x >> 17;\n    x ^= x << 5;\n    this.seed = x;\n    return ((x >>> 0) % 10000) / 10000;\n  }\n  range(min: number, max: number): number {\n    return min + (max - min) * this.next();\n  }\n}\n\n// Game constants (will be updated to match background image size)\nlet WORLD_SIZE = { w: 2400, h: 1600 };\nconst CAMERA_LERP = 0.12;\nconst PLAYER_SPEED = 320;\nconst BULLET_SPEED = 900;\nconst BULLET_LIFE = 0.9;\nconst ENEMY_BASE_SPEED = 110;\nconst ENEMY_SPAWN_INTERVAL = 1.4;\nconst ENEMY_RADIUS = 18;\nconst SPAWN_PAD = 40;\nconst VISUAL_SCALE = 1.5; // visual upscale for player and enemies\n// Enemy scaling helpers\nfunction computeEnemyHp(currentWave: number): number {\n  const baseHp = 10; // starting baseline (reduced by 2x)\n  // Super-linear growth: significantly tougher each wave\n  return Math.floor(baseHp * Math.pow(1 + currentWave, 1.4));\n}\nconst PELLETS = 8; // pellets per shotgun shot\n\n// Canvas setup\nconst appEl = document.getElementById('app')!;\nconst canvas = document.createElement('canvas');\nconst hud = document.createElement('div');\nhud.className = 'hud';\nconst timerEl = document.createElement('div');\ntimerEl.style.position = 'absolute';\ntimerEl.style.left = '50%';\ntimerEl.style.top = '10px';\ntimerEl.style.transform = 'translateX(-50%)';\ntimerEl.style.background = 'rgba(10,14,28,0.55)';\ntimerEl.style.border = '1px solid rgba(255,255,255,0.15)';\ntimerEl.style.padding = '6px 10px';\ntimerEl.style.borderRadius = '8px';\ntimerEl.style.fontSize = '14px';\ntimerEl.style.zIndex = '3';\nconst cta = document.createElement('div');\ncta.className = 'cta';\ncta.innerHTML = '<h1>Top-down Shooter</h1><p>WASD – движение, ЛКМ – стрельба, ESC – пауза</p><p>Нажмите, чтобы начать</p><a class=\"btn\" href=\"#\">Играть</a>';\n\nappEl.appendChild(canvas);\nappEl.appendChild(hud);\nappEl.appendChild(timerEl);\nappEl.appendChild(cta);\nconst ctx = canvas.getContext('2d')!;\n\n// State\nconst audio = new AudioEngine();\nconst thunder = new ThunderAudio();\nlet running = false;\nlet paused = false;\nlet timeScale = 1;\nlet lastTime = performance.now();\nlet accumulator = 0;\nlet wave = 0;\nlet score = 0;\nlet hp = 100;\nlet rng = new RNG(123456);\nlet survivalTime = 0; // seconds\n\nconst player = { pos: { x: WORLD_SIZE.w / 2, y: WORLD_SIZE.h / 2 }, vel: { x: 0, y: 0 }, radius: 16, fireCd: 0, angle: 0 };\nconst camera = { pos: { x: player.pos.x, y: player.pos.y }, shake: 0 };\nconst bullets: Bullet[] = [];\nconst enemies: Enemy[] = [];\nconst particles: Particle[] = [];\nconst pickups: Pickup[] = [];\nconst floatingTexts: FloatingText[] = [];\n// visuals\nconst playerImg = new ImageAsset(characterPngUrl as string);\nconst doctorImg = new ImageAsset(enemyPngUrl as string);\nconst bgImg = new ImageAsset(backgroundPngUrl as string);\nconst applyWorldSizeFromBg = (): void => {\n  const img = bgImg.get();\n  const iw = (img as HTMLImageElement).naturalWidth || img.width;\n  const ih = (img as HTMLImageElement).naturalHeight || img.height;\n  if (iw && ih) {\n    WORLD_SIZE = { w: iw, h: ih };\n    if (!running) {\n      player.pos = { x: WORLD_SIZE.w / 2, y: WORLD_SIZE.h / 2 };\n      camera.pos = { x: player.pos.x, y: player.pos.y };\n    }\n  }\n};\nif (bgImg.isReady()) applyWorldSizeFromBg();\nelse bgImg.get().addEventListener('load', applyWorldSizeFromBg);\nlet lightningTimer = 0;\nlet lightningAlpha = 0;\n// weapon upgrade & pickups\nlet damageLevel = 0; // 0..3\nlet pelletDamage = 1; // base damage per pellet\nlet medkitTimer = rand(10, 30);\nlet upgradeTimer = rand(10, 30);\nfunction resetMedkitTimer(): void { medkitTimer = rand(10, 30); }\nfunction resetUpgradeTimer(): void { upgradeTimer = rand(10, 30); }\n\n// Collision removed → straight movement without constraints\n\nconst input = {\n  w: false, a: false, s: false, d: false,\n  mouseDown: false,\n  mouse: { x: 0, y: 0 }, // screen space\n};\n\n// Resize\nfunction resize(): void {\n  const dpr = Math.min(window.devicePixelRatio || 1, 2);\n  canvas.width = Math.floor(window.innerWidth * dpr);\n  canvas.height = Math.floor(window.innerHeight * dpr);\n  (ctx as any).imageSmoothingEnabled = false;\n}\nwindow.addEventListener('resize', resize);\nresize();\n\n// Input\nwindow.addEventListener('keydown', (e) => {\n  if (e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') input.w = true;\n  if (e.key === 'a' || e.key === 'A' || e.key === 'ArrowLeft') input.a = true;\n  if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') input.s = true;\n  if (e.key === 'd' || e.key === 'D' || e.key === 'ArrowRight') input.d = true;\n  if (e.key === 'Escape') paused = !paused;\n  if (e.key === 'm' || e.key === 'M') audio.toggleMute();\n});\nwindow.addEventListener('keyup', (e) => {\n  if (e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') input.w = false;\n  if (e.key === 'a' || e.key === 'A' || e.key === 'ArrowLeft') input.a = false;\n  if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') input.s = false;\n  if (e.key === 'd' || e.key === 'D' || e.key === 'ArrowRight') input.d = false;\n});\ncanvas.addEventListener('mousemove', (e) => {\n  input.mouse.x = e.clientX;\n  input.mouse.y = e.clientY;\n});\ncanvas.addEventListener('mousedown', () => (input.mouseDown = true));\ncanvas.addEventListener('mouseup', () => (input.mouseDown = false));\ncta.addEventListener('click', (e) => {\n  e.preventDefault();\n  running = true;\n  paused = false;\n  cta.style.display = 'none';\n  // reset state to ensure fresh run\n  bullets.length = 0; enemies.length = 0; particles.length = 0;\n  player.pos = { x: WORLD_SIZE.w / 2, y: WORLD_SIZE.h / 2 };\n  player.vel = { x: 0, y: 0 };\n  player.fireCd = 0; player.angle = 0;\n  camera.pos = { x: player.pos.x, y: player.pos.y };\n  camera.shake = 0;\n  score = 0; wave = 0; hp = 100; rng = new RNG(randInt(1, 999999));\n  toSpawn = 0; spawnTimer = 0; nextWaveTimer = 0;\n  beginWave();\n});\n\n// Helpers: world <-> screen\nfunction worldToScreen(p: Vec2): Vec2 {\n  const dpr = Math.min(window.devicePixelRatio || 1, 2);\n  const cx = canvas.width / 2;\n  const cy = canvas.height / 2;\n  return { x: Math.floor((p.x - camera.pos.x) * dpr + cx), y: Math.floor((p.y - camera.pos.y) * dpr + cy) };\n}\n\nfunction screenToWorld(p: Vec2): Vec2 {\n  const dpr = Math.min(window.devicePixelRatio || 1, 2);\n  const cx = canvas.width / 2;\n  const cy = canvas.height / 2;\n  // Convert incoming CSS pixels (mouse) to device pixels before inverting transform\n  const sx = p.x * dpr;\n  const sy = p.y * dpr;\n  return { x: (sx - cx) / dpr + camera.pos.x, y: (sy - cy) / dpr + camera.pos.y };\n}\n\n// Systems\nfunction tryShoot(dt: number): void {\n  player.fireCd -= dt;\n  const target = screenToWorld(input.mouse);\n  const dir = normalize(sub(target, player.pos));\n  // keep player angle aligned while firing aim moves fast\n  player.angle = Math.atan2(dir.y, dir.x);\n  if (input.mouseDown && player.fireCd <= 0) {\n    // shotgun: multiple pellets spread\n    player.fireCd = 0.4;\n    for (let p = 0; p < PELLETS; p++) {\n      const spread = (Math.random() - 0.5) * 0.25; // radians\n      const ang = Math.atan2(dir.y, dir.x) + spread;\n      const v = { x: Math.cos(ang), y: Math.sin(ang) };\n      const speed = BULLET_SPEED * rand(0.75, 1.0);\n      bullets.push({ pos: add(player.pos, mul(v, player.radius + 10)), vel: mul(v, speed), life: BULLET_LIFE * rand(0.6, 1.0), damage: pelletDamage });\n    }\n    playShotgun();\n    camera.shake = Math.min(camera.shake + 0.7, 1.6);\n    // muzzle flash and smoke\n    for (let i = 0; i < 20; i++) {\n      particles.push({\n        pos: add(player.pos, mul(dir, player.radius + 12)),\n        vel: add(mul(dir, rand(120, 320)), { x: rand(-140, 140), y: rand(-140, 140) }),\n        life: rand(0.05, 0.25),\n        color: i < 6 ? 'rgba(255,210,120,1)' : 'rgba(180,180,180,1)',\n        size: rand(1.5, 3.2),\n      });\n    }\n  }\n}\n\nfunction spawnEnemy(): void {\n  // spawn just outside current camera view, so enemies enter from edges\n  const dpr = Math.min(window.devicePixelRatio || 1, 2);\n  const viewTopLeft = screenToWorld({ x: 0, y: 0 });\n  const viewBottomRight = screenToWorld({ x: canvas.width, y: canvas.height });\n  const side = randInt(0, 4); // 0=top,1=right,2=bottom,3=left\n  let x = 0, y = 0;\n  if (side === 0) { x = rand(viewTopLeft.x, viewBottomRight.x); y = viewTopLeft.y - SPAWN_PAD * 4; }\n  if (side === 1) { x = viewBottomRight.x + SPAWN_PAD * 4; y = rand(viewTopLeft.y, viewBottomRight.y); }\n  if (side === 2) { x = rand(viewTopLeft.x, viewBottomRight.x); y = viewBottomRight.y + SPAWN_PAD * 4; }\n  if (side === 3) { x = viewTopLeft.x - SPAWN_PAD * 4; y = rand(viewTopLeft.y, viewBottomRight.y); }\n  // enemy speed does NOT scale with wave; some are only slightly faster than player\n  const base = PLAYER_SPEED * 0.85;\n  const speed = base * (Math.random() < 0.2 ? 1.05 : 1.0);\n  const hp = computeEnemyHp(wave);\n  enemies.push({ pos: { x, y }, vel: { x: 0, y: 0 }, speed, hp, maxHp: hp, radius: ENEMY_RADIUS, spawnFx: 0.4 });\n}\n\nlet spawnTimer = 0;\nlet toSpawn = 0; // remaining enemies to spawn this wave\nlet nextWaveTimer = 0; // delay before starting next wave (sec)\n\nfunction beginWave(): void {\n  wave += 1;\n  // Increase enemy count per wave faster, with mild quadratic term\n  toSpawn = Math.min(14 + wave * 6 + Math.floor((wave * wave) * 0.5), 220);\n  spawnTimer = 0.2;\n  nextWaveTimer = 0;\n  audio.playWave();\n  hp = Math.min(100, hp + 10);\n}\n\nfunction updateEnemies(dt: number): void {\n  spawnTimer -= dt;\n  if (toSpawn > 0 && spawnTimer <= 0) {\n    spawnEnemy();\n    toSpawn -= 1;\n    spawnTimer = Math.max(ENEMY_SPAWN_INTERVAL - wave * 0.05, 0.4);\n  }\n\n  for (let i = enemies.length - 1; i >= 0; i--) {\n    const e = enemies[i];\n    const dir = normalize(sub(player.pos, e.pos));\n    e.vel = mul(dir, e.speed);\n    e.pos = add(e.pos, mul(e.vel, dt));\n    e.pos.x = clamp(e.pos.x, -SPAWN_PAD, WORLD_SIZE.w + SPAWN_PAD);\n    e.pos.y = clamp(e.pos.y, -SPAWN_PAD, WORLD_SIZE.h + SPAWN_PAD);\n    e.spawnFx = Math.max(0, e.spawnFx - dt);\n\n    const toPlayer = sub(player.pos, e.pos);\n    if (length(toPlayer) < e.radius + player.radius) {\n      // enemy explodes and deals burst damage\n      hp = Math.max(0, hp - 50);\n      audio.playHit();\n      camera.shake = Math.min(camera.shake + 1.2, 2.0);\n      for (let k = 0; k < 28; k++) {\n        particles.push({\n          pos: { ...e.pos },\n          vel: { x: rand(-300, 300), y: rand(-300, 300) },\n          life: rand(0.25, 0.6),\n          color: k % 2 === 0 ? 'rgba(255,120,60,1)' : 'rgba(255,60,60,1)',\n          size: rand(1.5, 3.5),\n        });\n      }\n      enemies.splice(i, 1);\n      continue;\n    }\n  }\n}\n\nfunction updateBullets(dt: number): void {\n  for (let i = bullets.length - 1; i >= 0; i--) {\n    const b = bullets[i];\n    b.pos = add(b.pos, mul(b.vel, dt));\n    b.life -= dt;\n    if (b.life <= 0) {\n      bullets.splice(i, 1);\n      continue;\n    }\n    // world bounds soft fade\n    if (b.pos.x < -SPAWN_PAD || b.pos.x > WORLD_SIZE.w + SPAWN_PAD || b.pos.y < -SPAWN_PAD || b.pos.y > WORLD_SIZE.h + SPAWN_PAD) {\n      b.life = 0;\n      bullets.splice(i, 1);\n    }\n  }\n}\n\nfunction bulletsVsEnemies(): void {\n  for (let i = enemies.length - 1; i >= 0; i--) {\n    const e = enemies[i];\n    for (let j = bullets.length - 1; j >= 0; j--) {\n      const b = bullets[j];\n      const d = length(sub(e.pos, b.pos));\n      if (d < e.radius + 4) {\n        bullets.splice(j, 1);\n        e.hp -= b.damage;\n        // floating damage text\n        floatingTexts.push({ pos: { ...e.pos }, vel: { x: rand(-20, 20), y: -60 }, life: 1.4, text: `${b.damage}`, color: 'rgba(255,230,90,1)' });\n        camera.shake = Math.min(camera.shake + 0.2, 1.0);\n        for (let k = 0; k < 10; k++) {\n          particles.push({\n            pos: { ...e.pos },\n            vel: { x: rand(-180, 180), y: rand(-180, 180) },\n            life: rand(0.15, 0.4),\n            color: 'rgba(255,60,60,1)',\n            size: rand(1, 3),\n          });\n        }\n        if (e.hp <= 0) {\n          // enemy death\n          score += 10 + wave;\n          for (let k = 0; k < 24; k++) {\n            particles.push({\n              pos: { ...e.pos },\n              vel: { x: rand(-220, 220), y: rand(-220, 220) },\n              life: rand(0.25, 0.7),\n              color: 'rgba(255,140,60,1)',\n              size: rand(1.5, 3.5),\n            });\n          }\n          audio.playHit();\n          enemies.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n}\n\nfunction updateParticles(dt: number): void {\n  for (let i = particles.length - 1; i >= 0; i--) {\n    const p = particles[i];\n    p.pos = add(p.pos, mul(p.vel, dt));\n    p.life -= dt;\n    p.vel.x *= 0.98; p.vel.y *= 0.98;\n    if (p.life <= 0) particles.splice(i, 1);\n  }\n}\n\nfunction updateFloatingTexts(dt: number): void {\n  for (let i = floatingTexts.length - 1; i >= 0; i--) {\n    const ft = floatingTexts[i];\n    ft.pos = add(ft.pos, mul(ft.vel, dt));\n    ft.life -= dt;\n    ft.vel.y -= 20 * dt;\n    if (ft.life <= 0) floatingTexts.splice(i, 1);\n  }\n}\n\nfunction updatePlayer(dt: number): void {\n  const dirMove = normalize({ x: (input.d ? 1 : 0) - (input.a ? 1 : 0), y: (input.s ? 1 : 0) - (input.w ? 1 : 0) });\n  const speed = PLAYER_SPEED * (hp > 0 ? 1 : 0);\n  player.vel = mul(dirMove, speed);\n  const delta = mul(player.vel, dt);\n  player.pos = add(player.pos, delta);\n  player.pos.x = clamp(player.pos.x, 0, WORLD_SIZE.w);\n  player.pos.y = clamp(player.pos.y, 0, WORLD_SIZE.h);\n  // face mouse\n  const target = screenToWorld(input.mouse);\n  const aimDir = normalize(sub(target, player.pos));\n  player.angle = Math.atan2(aimDir.y, aimDir.x);\n}\n\nfunction updateCamera(dt: number): void {\n  const target = { x: player.pos.x, y: player.pos.y };\n  camera.pos.x = lerp(camera.pos.x, target.x, CAMERA_LERP);\n  camera.pos.y = lerp(camera.pos.y, target.y, CAMERA_LERP);\n  if (camera.shake > 0) {\n    camera.shake = Math.max(0, camera.shake - dt * 2.2);\n  }\n}\n\nfunction updateHud(): void {\n  hud.innerHTML = `\n    <b>Очки:</b> ${score} &nbsp; | &nbsp; \n    <b>Волна:</b> ${wave}${nextWaveTimer > 0 ? ` (через ${nextWaveTimer.toFixed(1)}с)` : ''} &nbsp; | &nbsp;\n    <b>HP:</b> ${hp} &nbsp; | &nbsp; <b>Урон дробовика:</b> L${damageLevel}\n  `;\n  timerEl.textContent = `Время выживания: ${formatHMS(survivalTime)}`;\n}\n\nfunction formatHMS(totalSeconds: number): string {\n  const s = Math.floor(totalSeconds % 60);\n  const m = Math.floor((totalSeconds / 60) % 60);\n  const h = Math.floor(totalSeconds / 3600);\n  const pad = (n: number) => n.toString().padStart(2, '0');\n  return `${pad(h)}:${pad(m)}:${pad(s)}`;\n}\n\nfunction maybeStartNextWave(dt: number): void {\n  if (!running) return;\n  if (toSpawn === 0 && enemies.length === 0 && nextWaveTimer === 0) {\n    // Wave cleared → start delay\n    nextWaveTimer = 2.0;\n    for (let i = 0; i < 40; i++) {\n      particles.push({\n        pos: { ...player.pos },\n        vel: { x: rand(-260, 260), y: rand(-260, 260) },\n        life: rand(0.3, 0.7),\n        color: 'rgba(120,200,255,1)',\n        size: rand(1, 3),\n      });\n    }\n  }\n  if (nextWaveTimer > 0) {\n    nextWaveTimer = Math.max(0, nextWaveTimer - dt);\n    if (nextWaveTimer === 0) beginWave();\n  }\n}\n\nfunction draw(): void {\n  const dpr = Math.min(window.devicePixelRatio || 1, 2);\n  ctx.save();\n  // screenshake\n  if (camera.shake > 0) {\n    const s = camera.shake;\n    ctx.translate(rand(-6, 6) * s, rand(-6, 6) * s);\n  }\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  // background image (world-aligned)\n  ctx.fillStyle = '#0b1020';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  if (bgImg.isReady()) {\n    const img = bgImg.get();\n    const dpr = Math.min(window.devicePixelRatio || 1, 2);\n    const cx = canvas.width / 2; const cy = canvas.height / 2;\n    const iw = (img as HTMLImageElement).naturalWidth || img.width; \n    const ih = (img as HTMLImageElement).naturalHeight || img.height;\n    const w = Math.round(iw * dpr);\n    const h = Math.round(ih * dpr);\n    // base position for main world tile\n    const baseX = Math.floor(-camera.pos.x * dpr + cx);\n    const baseY = Math.floor(-camera.pos.y * dpr + cy);\n    // draw 3x3 tiles around the main map to visually extend space\n    for (let ty = -1; ty <= 1; ty++) {\n      for (let tx = -1; tx <= 1; tx++) {\n        const dx = baseX + tx * w;\n        const dy = baseY + ty * h;\n        ctx.drawImage(img, dx, dy, w, h);\n      }\n    }\n  }\n\n  // particles\n  for (const p of particles) {\n    const s = worldToScreen(p.pos);\n    const alpha = clamp(p.life * 4, 0, 1);\n    ctx.fillStyle = p.color.replace(',1)', `,${alpha})`);\n    ctx.beginPath();\n    ctx.arc(s.x, s.y, p.size * dpr, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  // enemies\n  for (const e of enemies) {\n    const s = worldToScreen(e.pos);\n    const r = (e.radius * VISUAL_SCALE + (e.spawnFx > 0 ? Math.sin((0.4 - e.spawnFx) * 20) * 4 : 0)) * dpr;\n    if (doctorImg.isReady()) {\n      const img = doctorImg.get();\n      ctx.drawImage(img, s.x - r, s.y - r, r * 2, r * 2);\n    } else {\n      ctx.fillStyle = '#ff5252';\n      ctx.beginPath();\n      ctx.arc(s.x, s.y, r, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.strokeStyle = 'rgba(255,255,255,0.12)';\n      ctx.stroke();\n    }\n    // enemy health bar\n    const barW = r * 2;\n    const barH = 4 * dpr;\n    const bx = s.x - barW / 2;\n    const by = s.y - r - 8 * dpr;\n    ctx.fillStyle = 'rgba(0,0,0,0.5)';\n    ctx.fillRect(bx, by, barW, barH);\n    const hpRatio = clamp(e.hp / e.maxHp, 0, 1);\n    ctx.fillStyle = '#e74c3c';\n    ctx.fillRect(bx, by, barW * hpRatio, barH);\n  }\n\n  // player (static sprite)\n  const ps = worldToScreen(player.pos);\n  ctx.save();\n  ctx.translate(ps.x, ps.y);\n  // no rotation for static sprite\n  const r = player.radius * VISUAL_SCALE * dpr;\n  if (playerImg.isReady()) {\n    const img = playerImg.get();\n    ctx.drawImage(img, -r, -r, r * 2, r * 2);\n  } else {\n    ctx.fillStyle = '#7ad0ff';\n    ctx.beginPath();\n    ctx.moveTo(r, 0);\n    ctx.lineTo(-r * 0.6, r * 0.75);\n    ctx.lineTo(-r * 0.4, 0);\n    ctx.lineTo(-r * 0.6, -r * 0.75);\n    ctx.closePath();\n    ctx.fill();\n    ctx.strokeStyle = 'rgba(255,255,255,0.2)';\n    ctx.stroke();\n  }\n  ctx.restore();\n  // player health bar\n  const pr = player.radius * VISUAL_SCALE * dpr;\n  const pbarW = pr * 2;\n  const pbarH = 5 * dpr;\n  const pbx = ps.x - pbarW / 2;\n  const pby = ps.y - pr - 10 * dpr;\n  ctx.fillStyle = 'rgba(0,0,0,0.5)';\n  ctx.fillRect(pbx, pby, pbarW, pbarH);\n  ctx.fillStyle = '#e74c3c';\n  ctx.fillRect(pbx, pby, pbarW * clamp(hp / 100, 0, 1), pbarH);\n\n  // gun direction indicator\n  // aim indicator: small arc towards mouse\n  const aim = screenToWorld(input.mouse);\n  const dir = normalize(sub(aim, player.pos));\n  const ang = Math.atan2(dir.y, dir.x);\n  const arcR = player.radius * VISUAL_SCALE * dpr + 8;\n  ctx.strokeStyle = '#ffd166';\n  ctx.lineWidth = 2.5 * dpr;\n  ctx.beginPath();\n  const halfSpan = Math.PI / 8; // quarter of quarter-circle\n  ctx.arc(ps.x, ps.y, arcR, ang - halfSpan, ang + halfSpan);\n  ctx.stroke();\n\n  // bullets\n  ctx.fillStyle = '#ffd27a';\n  for (const b of bullets) {\n    const s = worldToScreen(b.pos);\n    ctx.beginPath();\n    ctx.arc(s.x, s.y, 3 * dpr, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  ctx.restore();\n\n  // rain overlay and lightning flash\n  drawRainAndLightning(dpr);\n  // pickups on top of rain\n  drawPickups(dpr);\n  // floating damage numbers\n  drawFloatingTexts(dpr);\n  // fog of war spotlight\n  drawFogOfWar(dpr);\n}\n\n// Rain and lightning\ntype Raindrop = { x: number; y: number; vx: number; vy: number; len: number };\nlet raindrops: Raindrop[] = [];\nfunction initRain(): void {\n  const w = canvas.width; const h = canvas.height;\n  const count = 180; // reduced intensity\n  raindrops = new Array(count).fill(0).map(() => ({\n    x: Math.random() * (w + 200) - 100,\n    y: Math.random() * (h + 200) - 100,\n    vx:  -120, // wind left\n    vy:  700 + Math.random() * 300,\n    len: 10 + Math.random() * 12,\n  }));\n}\nfunction drawRainAndLightning(dpr: number): void {\n  const w = canvas.width; const h = canvas.height;\n  if (raindrops.length === 0) initRain();\n  ctx.save();\n  ctx.globalAlpha = 0.28; // softer\n  ctx.strokeStyle = 'rgba(160,180,210,0.85)';\n  ctx.lineWidth = Math.max(1, 1 * dpr);\n  for (const drop of raindrops) {\n    ctx.beginPath();\n    ctx.moveTo(drop.x, drop.y);\n    ctx.lineTo(drop.x + drop.vx * 0.05, drop.y + drop.len * dpr);\n    ctx.stroke();\n    drop.x += drop.vx * (1/60);\n    drop.y += drop.vy * (1/60);\n    if (drop.y - drop.len > h + 120) {\n      drop.y = -120; drop.x = Math.random() * (w + 200) - 100;\n    }\n    if (drop.x < -150) drop.x = w + 150;\n  }\n  ctx.restore();\n\n  // lightning less frequent\n  lightningTimer -= 1 / 60;\n  if (lightningTimer <= 0) {\n    lightningTimer = rand(8, 16); // increased delay\n    if (Math.random() < 0.5) { // occasional skip to make rarer\n      lightningAlpha = 1;\n      thunder.playThunder();\n    }\n  }\n  if (lightningAlpha > 0) {\n    ctx.fillStyle = `rgba(255,255,255,${lightningAlpha})`;\n    ctx.fillRect(0, 0, w, h);\n    lightningAlpha = Math.max(0, lightningAlpha - 0.08);\n  }\n}\n\n// Fog-of-war: visible circle around player with falloff to dark\nfunction drawFogOfWar(dpr: number): void {\n  const ps = worldToScreen(player.pos);\n  const w = canvas.width, h = canvas.height;\n  const inner = Math.max(140 * dpr, (player.radius * VISUAL_SCALE + 50) * dpr);\n  const outer = Math.min(Math.max(w, h) * 0.75, inner * 2.4);\n  const g = ctx.createRadialGradient(ps.x, ps.y, inner, ps.x, ps.y, outer);\n  g.addColorStop(0, 'rgba(0,0,0,0)');\n  g.addColorStop(0.6, 'rgba(0,0,0,0.35)');\n  g.addColorStop(1, 'rgba(0,0,0,0.85)');\n  ctx.fillStyle = g;\n  ctx.fillRect(0, 0, w, h);\n}\n\n// Pickups\nfunction spawnPickup(kind: 'medkit' | 'damage'): void {\n  // spawn anywhere within world bounds, not just in current view\n  const margin = 40;\n  const pos = {\n    x: clamp(rand(margin, WORLD_SIZE.w - margin), 0, WORLD_SIZE.w),\n    y: clamp(rand(margin, WORLD_SIZE.h - margin), 0, WORLD_SIZE.h),\n  };\n  pickups.push({ pos, radius: 18, kind });\n}\n\nfunction updatePickups(dt: number): void {\n  // timers\n  medkitTimer -= dt; upgradeTimer -= dt;\n  const medkitsOnGround = pickups.filter(p => p.kind === 'medkit').length;\n  const upgradesOnGround = pickups.filter(p => p.kind === 'damage').length;\n  if (medkitTimer <= 0 && medkitsOnGround < 2) { spawnPickup('medkit'); resetMedkitTimer(); }\n  if (upgradeTimer <= 0 && upgradesOnGround < 1) {\n    // chance decreases slightly with each acquired upgrade, floored at 20%\n    const baseChance = 0.6; // 60% when L0\n    const decrementPerLevel = 0.03; // minus 3% per level\n    const chance = Math.max(0.2, baseChance - damageLevel * decrementPerLevel);\n    if (Math.random() < chance) { spawnPickup('damage'); thunder.playChime(); }\n    resetUpgradeTimer();\n  }\n\n  // collect\n  for (let i = pickups.length - 1; i >= 0; i--) {\n    const p = pickups[i];\n    const d = length(sub(p.pos, player.pos));\n    if (d < p.radius + player.radius) {\n      if (p.kind === 'medkit') {\n        hp = Math.min(100, hp + 35);\n        audio.playWave();\n      } else if (p.kind === 'damage') {\n        damageLevel = damageLevel + 1; // no cap\n        pelletDamage = 1 + damageLevel; // scale linearly with level\n        audio.playWave();\n      }\n      pickups.splice(i, 1);\n    }\n  }\n}\n\nfunction drawPickups(dpr: number): void {\n  for (const p of pickups) {\n    const s = worldToScreen(p.pos);\n    const w = 28 * dpr; const h = 18 * dpr; const x = s.x - w/2; const y = s.y - h/2;\n    if (p.kind === 'medkit') {\n      // white rounded rect with red cross\n      drawRoundedRect(x, y, w, h, 6 * dpr, 'rgba(255,255,255,0.95)', 'rgba(0,0,0,0.35)');\n      ctx.fillStyle = '#d33';\n      const cx = s.x; const cy = s.y;\n      ctx.fillRect(cx - 2 * dpr, cy - 6 * dpr, 4 * dpr, 12 * dpr);\n      ctx.fillRect(cx - 6 * dpr, cy - 2 * dpr, 12 * dpr, 4 * dpr);\n    } else {\n      // black rounded rect with red upward arrow\n      drawRoundedRect(x, y, w, h, 6 * dpr, 'rgba(0,0,0,0.85)', 'rgba(255,255,255,0.35)');\n      ctx.fillStyle = '#ff4444';\n      ctx.beginPath();\n      ctx.moveTo(s.x, y + 4 * dpr);\n      ctx.lineTo(s.x - 6 * dpr, y + h - 4 * dpr);\n      ctx.lineTo(s.x + 6 * dpr, y + h - 4 * dpr);\n      ctx.closePath();\n      ctx.fill();\n    }\n  }\n}\n\nfunction drawRoundedRect(x: number, y: number, w: number, h: number, r: number, fill: string, stroke?: string): void {\n  ctx.beginPath();\n  ctx.moveTo(x + r, y);\n  ctx.arcTo(x + w, y, x + w, y + h, r);\n  ctx.arcTo(x + w, y + h, x, y + h, r);\n  ctx.arcTo(x, y + h, x, y, r);\n  ctx.arcTo(x, y, x + w, y, r);\n  ctx.closePath();\n  ctx.fillStyle = fill; ctx.fill();\n  if (stroke) { ctx.strokeStyle = stroke; ctx.stroke(); }\n}\n\nfunction drawFloatingTexts(dpr: number): void {\n  ctx.save();\n  for (const ft of floatingTexts) {\n    const s = worldToScreen(ft.pos);\n    const alpha = clamp(ft.life / 1.4, 0, 1);\n    ctx.font = `bold ${28 * dpr}px sans-serif`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    // shadow/outline for crispness\n    ctx.lineWidth = 4 * dpr;\n    ctx.strokeStyle = `rgba(0,0,0,${alpha})`;\n    ctx.strokeText(ft.text, s.x, s.y);\n    ctx.fillStyle = `rgba(255,230,90,${alpha})`;\n    ctx.fillText(ft.text, s.x, s.y);\n  }\n  ctx.restore();\n}\n\n// Shotgun sound\nfunction playShotgun(): void {\n  audio[\"ensure\" as any]?.();\n  // synth burst: low short thump + noise crack\n  const ctxAny = (audio as any).ctx as AudioContext | undefined;\n  const master = (audio as any).master as GainNode | undefined;\n  if (!ctxAny || !master) return;\n  const o = ctxAny.createOscillator();\n  o.type = 'square';\n  o.frequency.setValueAtTime(200, ctxAny.currentTime);\n  o.frequency.exponentialRampToValueAtTime(80, ctxAny.currentTime + 0.08);\n  const g = ctxAny.createGain();\n  g.gain.setValueAtTime(0.6, ctxAny.currentTime);\n  g.gain.exponentialRampToValueAtTime(0.001, ctxAny.currentTime + 0.12);\n  o.connect(g).connect(master);\n  o.start();\n  o.stop(ctxAny.currentTime + 0.13);\n\n  // noise for blast\n  const bufferSize = 0.2 * ctxAny.sampleRate;\n  const noiseBuffer = ctxAny.createBuffer(1, bufferSize, ctxAny.sampleRate);\n  const data = noiseBuffer.getChannelData(0);\n  for (let i = 0; i < bufferSize; i++) {\n    data[i] = (Math.random() * 2 - 1) * (1 - i / bufferSize);\n  }\n  const noise = ctxAny.createBufferSource();\n  noise.buffer = noiseBuffer;\n  const f = ctxAny.createBiquadFilter();\n  f.type = 'highpass'; f.frequency.value = 800;\n  const g2 = ctxAny.createGain();\n  g2.gain.setValueAtTime(0.6, ctxAny.currentTime);\n  g2.gain.exponentialRampToValueAtTime(0.001, ctxAny.currentTime + 0.2);\n  noise.connect(f).connect(g2).connect(master);\n  noise.start();\n  noise.stop(ctxAny.currentTime + 0.21);\n}\n\nfunction gameOver(): void {\n  running = false;\n  cta.style.display = 'block';\n  cta.innerHTML = `<h1>Вы погибли</h1><p>Очки: ${score}, Волна: ${wave}</p><a class=\"btn\" href=\"#\">Играть снова</a>`;\n  // reset\n  bullets.length = 0; enemies.length = 0; particles.length = 0; pickups.length = 0;\n  player.pos = { x: WORLD_SIZE.w / 2, y: WORLD_SIZE.h / 2 };\n  camera.pos = { x: player.pos.x, y: player.pos.y };\n  camera.shake = 0;\n  score = 0; wave = 0; hp = 100; rng = new RNG(randInt(1, 999999));\n  damageLevel = 0; pelletDamage = 1; resetMedkitTimer(); resetUpgradeTimer();\n  survivalTime = 0;\n  toSpawn = 0; spawnTimer = 0; nextWaveTimer = 0;\n  audio.playDeath();\n}\n\n// Find nearest walkable position around a point using the collision grid\n// no-op helper removed as collisions are disabled\n\n// Main loop\nfunction step(now: number): void {\n  const dtRaw = Math.min(0.033, (now - lastTime) / 1000);\n  lastTime = now;\n  if (!running) {\n    draw();\n    requestAnimationFrame(step);\n    return;\n  }\n  if (paused) {\n    draw();\n    requestAnimationFrame(step);\n    return;\n  }\n\n  const dt = dtRaw * timeScale;\n  survivalTime += dt;\n  tryShoot(dt);\n  updatePlayer(dt);\n  updateEnemies(dt);\n  updateBullets(dt);\n  bulletsVsEnemies();\n  updateParticles(dt);\n  updatePickups(dt);\n  updateFloatingTexts(dt);\n  updateCamera(dt);\n  updateHud();\n  maybeStartNextWave(dt);\n\n  if (hp <= 0) gameOver();\n  draw();\n  requestAnimationFrame(step);\n}\n\nrequestAnimationFrame(step);\n\n\n"],"names":["ImageAsset","src","__publicField","ThunderAudio","ctx","g","bufferSize","noiseBuffer","output","i","noise","filter","o","characterPngUrl","enemyPngUrl","backgroundPngUrl","clamp","value","min","max","length","v","normalize","len","add","a","b","sub","mul","s","rand","randInt","lerp","t","AudioEngine","master","WORLD_SIZE","CAMERA_LERP","PLAYER_SPEED","BULLET_SPEED","BULLET_LIFE","ENEMY_SPAWN_INTERVAL","ENEMY_RADIUS","SPAWN_PAD","VISUAL_SCALE","computeEnemyHp","currentWave","PELLETS","appEl","canvas","hud","timerEl","cta","audio","thunder","running","paused","timeScale","lastTime","wave","score","hp","survivalTime","player","camera","bullets","enemies","particles","pickups","floatingTexts","playerImg","doctorImg","bgImg","applyWorldSizeFromBg","img","iw","ih","lightningTimer","lightningAlpha","damageLevel","pelletDamage","medkitTimer","upgradeTimer","resetMedkitTimer","resetUpgradeTimer","input","resize","dpr","toSpawn","spawnTimer","nextWaveTimer","beginWave","worldToScreen","p","cx","cy","screenToWorld","sx","sy","tryShoot","dt","target","dir","spread","ang","speed","playShotgun","spawnEnemy","viewTopLeft","viewBottomRight","side","x","y","updateEnemies","e","toPlayer","k","updateBullets","bulletsVsEnemies","j","updateParticles","updateFloatingTexts","ft","updatePlayer","dirMove","delta","aimDir","updateCamera","updateHud","formatHMS","totalSeconds","m","h","pad","n","maybeStartNextWave","draw","w","baseX","baseY","ty","tx","dx","dy","alpha","r","barW","barH","bx","by","hpRatio","ps","pr","pbarW","pbarH","pbx","pby","aim","arcR","halfSpan","drawRainAndLightning","drawPickups","drawFloatingTexts","drawFogOfWar","raindrops","initRain","count","drop","inner","outer","spawnPickup","kind","pos","updatePickups","medkitsOnGround","upgradesOnGround","chance","drawRoundedRect","fill","stroke","ctxAny","data","f","g2","gameOver","step","now","dtRaw"],"mappings":"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"}