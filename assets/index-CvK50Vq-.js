var qe=Object.defineProperty;var Ie=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var L=(e,t,n)=>Ie(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();class fe{constructor(t){L(this,"image");L(this,"loaded",!1);this.src=t,this.image=new Image,this.image.decoding="async",this.image.onload=()=>{this.loaded=!0},this.image.onerror=()=>{this.loaded=!1},this.image.src=t,this.image.complete&&(this.loaded=!0)}isReady(){return this.loaded}get(){return this.image}}class He{constructor(){L(this,"ctx",null);L(this,"master",null);L(this,"chimeBuffer",null)}ensure(){if(!this.ctx){const t=new(window.AudioContext||window.webkitAudioContext),n=t.createGain();n.gain.value=.25,n.connect(t.destination),this.ctx=t,this.master=n}}playThunder(){if(this.ensure(),!this.ctx||!this.master)return;const t=this.ctx,n=2*t.sampleRate,o=t.createBuffer(1,n,t.sampleRate),i=o.getChannelData(0);for(let x=0;x<n;x++)i[x]=(Math.random()*2-1)*(1-x/n);const a=t.createBufferSource();a.buffer=o;const l=t.createBiquadFilter();l.type="lowpass",l.frequency.value=600+Math.random()*400;const p=t.createGain();p.gain.setValueAtTime(.001,t.currentTime),p.gain.exponentialRampToValueAtTime(.6,t.currentTime+.02),p.gain.exponentialRampToValueAtTime(.001,t.currentTime+2.2),a.connect(l).connect(p).connect(this.master),a.start(),a.stop(t.currentTime+2.3)}playChime(){if(this.ensure(),!this.ctx||!this.master)return;const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="sine",t.frequency.setValueAtTime(880,this.ctx.currentTime),t.frequency.exponentialRampToValueAtTime(1320,this.ctx.currentTime+.12),n.gain.setValueAtTime(1e-4,this.ctx.currentTime),n.gain.exponentialRampToValueAtTime(.35,this.ctx.currentTime+.02),n.gain.exponentialRampToValueAtTime(1e-4,this.ctx.currentTime+.6),t.connect(n).connect(this.master),t.start(),t.stop(this.ctx.currentTime+.65)}}const Fe="/assets/character-BxDpat87.png",Oe="/assets/enemy-Cgr-U8uy.png",$e="/assets/background-4OmM09LY.png";function P(e,t,n){return Math.max(t,Math.min(n,e))}function ne(e){return Math.hypot(e.x,e.y)}function _(e){const t=ne(e)||1;return{x:e.x/t,y:e.y/t}}function V(e,t){return{x:e.x+t.x,y:e.y+t.y}}function q(e,t){return{x:e.x-t.x,y:e.y-t.y}}function v(e,t){return{x:e.x*t,y:e.y*t}}function c(e,t){return Math.random()*(t-e)+e}function Be(e,t){return Math.floor(c(e,t))}function xe(e,t,n){return e+(t-e)*n}class ze{constructor(){L(this,"ctx",null);L(this,"master",null);L(this,"mute",!1)}ensure(){if(!this.ctx){const t=new(window.AudioContext||window.webkitAudioContext),n=t.createGain();n.gain.value=.15,n.connect(t.destination),this.ctx=t,this.master=n}}toggleMute(){this.mute=!this.mute,this.master&&(this.master.gain.value=this.mute?0:.15)}playShot(){if(this.ensure(),!this.ctx||!this.master)return;const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="square",t.frequency.value=440+c(-40,40),n.gain.setValueAtTime(.4,this.ctx.currentTime),n.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.08),t.connect(n).connect(this.master),t.start(),t.stop(this.ctx.currentTime+.1)}playHit(){if(this.ensure(),!this.ctx||!this.master)return;const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="sawtooth",t.frequency.value=120+c(-20,20),n.gain.setValueAtTime(.3,this.ctx.currentTime),n.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.15),t.connect(n).connect(this.master),t.start(),t.stop(this.ctx.currentTime+.18)}playWave(){if(this.ensure(),!this.ctx||!this.master)return;const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="triangle",t.frequency.value=220,n.gain.setValueAtTime(.001,this.ctx.currentTime),n.gain.linearRampToValueAtTime(.22,this.ctx.currentTime+.03),n.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.4),t.connect(n).connect(this.master),t.start(),t.stop(this.ctx.currentTime+.45)}playDeath(){if(this.ensure(),!this.ctx||!this.master)return;const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="square",t.frequency.setValueAtTime(200,this.ctx.currentTime),t.frequency.exponentialRampToValueAtTime(40,this.ctx.currentTime+.4),n.gain.setValueAtTime(.4,this.ctx.currentTime),n.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.4),t.connect(n).connect(this.master),t.start(),t.stop(this.ctx.currentTime+.45)}}let d={w:2400,h:1600};const ge=.12,Ae=320,Ge=900,Ne=.9,Ue=1.4,_e=18,g=40,N=1.5;function Ye(e){return Math.floor(10*Math.pow(1+e,1.4))}const Xe=8,se=document.getElementById("app"),h=document.createElement("canvas"),pe=document.createElement("div");pe.className="hud";const T=document.createElement("div");T.style.position="absolute";T.style.left="50%";T.style.top="10px";T.style.transform="translateX(-50%)";T.style.background="rgba(10,14,28,0.55)";T.style.border="1px solid rgba(255,255,255,0.15)";T.style.padding="6px 10px";T.style.borderRadius="8px";T.style.fontSize="14px";T.style.zIndex="3";const I=document.createElement("div");I.className="cta";I.innerHTML='<h1>Top-down Shooter</h1><p>WASD – движение, ЛКМ – стрельба, ESC – пауза</p><p>Нажмите, чтобы начать</p><a class="btn" href="#">Играть</a>';se.appendChild(h);se.appendChild(pe);se.appendChild(T);se.appendChild(I);const s=h.getContext("2d"),E=new ze,Re=new He;let K=!1,te=!1,je=1,we=performance.now(),k=0,Y=0,w=100,me=0;const r={pos:{x:d.w/2,y:d.h/2},vel:{x:0,y:0},radius:16,fireCd:0,angle:0},u={pos:{x:r.pos.x,y:r.pos.y},shake:0},A=[],R=[],S=[],C=[],U=[],Te=new fe(Fe),be=new fe(Oe),X=new fe($e),Me=()=>{const e=X.get(),t=e.naturalWidth||e.width,n=e.naturalHeight||e.height;t&&n&&(d={w:t,h:n},K||(r.pos={x:d.w/2,y:d.h/2},u.pos={x:r.pos.x,y:r.pos.y}))};X.isReady()?Me():X.get().addEventListener("load",Me);let re=0,G=0,F=0,de=1,le=c(10,30),ue=c(10,30);function Se(){le=c(10,30)}function Pe(){ue=c(10,30)}const m={w:!1,a:!1,s:!1,d:!1,mouseDown:!1,mouse:{x:0,y:0}};function Ee(){const e=Math.min(window.devicePixelRatio||1,2);h.width=Math.floor(window.innerWidth*e),h.height=Math.floor(window.innerHeight*e),s.imageSmoothingEnabled=!1}window.addEventListener("resize",Ee);Ee();window.addEventListener("keydown",e=>{(e.key==="w"||e.key==="W"||e.key==="ArrowUp")&&(m.w=!0),(e.key==="a"||e.key==="A"||e.key==="ArrowLeft")&&(m.a=!0),(e.key==="s"||e.key==="S"||e.key==="ArrowDown")&&(m.s=!0),(e.key==="d"||e.key==="D"||e.key==="ArrowRight")&&(m.d=!0),e.key==="Escape"&&(te=!te),(e.key==="m"||e.key==="M")&&E.toggleMute()});window.addEventListener("keyup",e=>{(e.key==="w"||e.key==="W"||e.key==="ArrowUp")&&(m.w=!1),(e.key==="a"||e.key==="A"||e.key==="ArrowLeft")&&(m.a=!1),(e.key==="s"||e.key==="S"||e.key==="ArrowDown")&&(m.s=!1),(e.key==="d"||e.key==="D"||e.key==="ArrowRight")&&(m.d=!1)});h.addEventListener("mousemove",e=>{m.mouse.x=e.clientX,m.mouse.y=e.clientY});h.addEventListener("mousedown",()=>m.mouseDown=!0);h.addEventListener("mouseup",()=>m.mouseDown=!1);I.addEventListener("click",e=>{e.preventDefault(),K=!0,te=!1,I.style.display="none",A.length=0,R.length=0,S.length=0,r.pos={x:d.w/2,y:d.h/2},r.vel={x:0,y:0},r.fireCd=0,r.angle=0,u.pos={x:r.pos.x,y:r.pos.y},u.shake=0,Y=0,k=0,w=100,$=0,O=0,M=0,Le()});function D(e){const t=Math.min(window.devicePixelRatio||1,2),n=h.width/2,o=h.height/2;return{x:Math.floor((e.x-u.pos.x)*t+n),y:Math.floor((e.y-u.pos.y)*t+o)}}function j(e){const t=Math.min(window.devicePixelRatio||1,2),n=h.width/2,o=h.height/2,i=e.x*t,a=e.y*t;return{x:(i-n)/t+u.pos.x,y:(a-o)/t+u.pos.y}}function Ke(e){r.fireCd-=e;const t=j(m.mouse),n=_(q(t,r.pos));if(r.angle=Math.atan2(n.y,n.x),m.mouseDown&&r.fireCd<=0){r.fireCd=.4;for(let o=0;o<Xe;o++){const i=(Math.random()-.5)*.25,a=Math.atan2(n.y,n.x)+i,l={x:Math.cos(a),y:Math.sin(a)},p=Ge*c(.75,1);A.push({pos:V(r.pos,v(l,r.radius+10)),vel:v(l,p),life:Ne*c(.6,1),damage:de})}mt(),u.shake=Math.min(u.shake+.7,1.6);for(let o=0;o<20;o++)S.push({pos:V(r.pos,v(n,r.radius+12)),vel:V(v(n,c(120,320)),{x:c(-140,140),y:c(-140,140)}),life:c(.05,.25),color:o<6?"rgba(255,210,120,1)":"rgba(180,180,180,1)",size:c(1.5,3.2)})}}function Ze(){const e=j({x:0,y:0}),t=j({x:h.width,y:h.height}),n=Be(0,4);let o=0,i=0;n===0&&(o=c(e.x,t.x),i=e.y-g*4),n===1&&(o=t.x+g*4,i=c(e.y,t.y)),n===2&&(o=c(e.x,t.x),i=t.y+g*4),n===3&&(o=e.x-g*4,i=c(e.y,t.y));const l=Ae*.85*(Math.random()<.2?1.05:1),p=Ye(k);R.push({pos:{x:o,y:i},vel:{x:0,y:0},speed:l,hp:p,maxHp:p,radius:_e,spawnFx:.4})}let O=0,$=0,M=0;function Le(){k+=1,$=Math.min(14+k*6+Math.floor(k*k*.5),220),O=.2,M=0,E.playWave(),w=Math.min(100,w+10)}function Je(e){O-=e,$>0&&O<=0&&(Ze(),$-=1,O=Math.max(Ue-k*.05,.4));for(let t=R.length-1;t>=0;t--){const n=R[t],o=_(q(r.pos,n.pos));n.vel=v(o,n.speed),n.pos=V(n.pos,v(n.vel,e)),n.pos.x=P(n.pos.x,-g,d.w+g),n.pos.y=P(n.pos.y,-g,d.h+g),n.spawnFx=Math.max(0,n.spawnFx-e);const i=q(r.pos,n.pos);if(ne(i)<n.radius+r.radius){w=Math.max(0,w-50),E.playHit(),u.shake=Math.min(u.shake+1.2,2);for(let a=0;a<28;a++)S.push({pos:{...n.pos},vel:{x:c(-300,300),y:c(-300,300)},life:c(.25,.6),color:a%2===0?"rgba(255,120,60,1)":"rgba(255,60,60,1)",size:c(1.5,3.5)});R.splice(t,1);continue}}}function Qe(e){for(let t=A.length-1;t>=0;t--){const n=A[t];if(n.pos=V(n.pos,v(n.vel,e)),n.life-=e,n.life<=0){A.splice(t,1);continue}(n.pos.x<-g||n.pos.x>d.w+g||n.pos.y<-g||n.pos.y>d.h+g)&&(n.life=0,A.splice(t,1))}}function et(){for(let e=R.length-1;e>=0;e--){const t=R[e];for(let n=A.length-1;n>=0;n--){const o=A[n];if(ne(q(t.pos,o.pos))<t.radius+4){A.splice(n,1),t.hp-=o.damage,U.push({pos:{...t.pos},vel:{x:c(-20,20),y:-60},life:1.4,text:`${o.damage}`,color:"rgba(255,230,90,1)"}),u.shake=Math.min(u.shake+.2,1);for(let a=0;a<10;a++)S.push({pos:{...t.pos},vel:{x:c(-180,180),y:c(-180,180)},life:c(.15,.4),color:"rgba(255,60,60,1)",size:c(1,3)});if(t.hp<=0){Y+=10+k;for(let a=0;a<24;a++)S.push({pos:{...t.pos},vel:{x:c(-220,220),y:c(-220,220)},life:c(.25,.7),color:"rgba(255,140,60,1)",size:c(1.5,3.5)});E.playHit(),R.splice(e,1);break}}}}}function tt(e){for(let t=S.length-1;t>=0;t--){const n=S[t];n.pos=V(n.pos,v(n.vel,e)),n.life-=e,n.vel.x*=.98,n.vel.y*=.98,n.life<=0&&S.splice(t,1)}}function nt(e){for(let t=U.length-1;t>=0;t--){const n=U[t];n.pos=V(n.pos,v(n.vel,e)),n.life-=e,n.vel.y-=20*e,n.life<=0&&U.splice(t,1)}}function st(e){const t=_({x:(m.d?1:0)-(m.a?1:0),y:(m.s?1:0)-(m.w?1:0)}),n=Ae*(w>0?1:0);r.vel=v(t,n);const o=v(r.vel,e);r.pos=V(r.pos,o),r.pos.x=P(r.pos.x,0,d.w),r.pos.y=P(r.pos.y,0,d.h);const i=j(m.mouse),a=_(q(i,r.pos));r.angle=Math.atan2(a.y,a.x)}function ot(e){const t={x:r.pos.x,y:r.pos.y};u.pos.x=xe(u.pos.x,t.x,ge),u.pos.y=xe(u.pos.y,t.y,ge),u.shake>0&&(u.shake=Math.max(0,u.shake-e*2.2))}function it(){pe.innerHTML=`
    <b>Очки:</b> ${Y} &nbsp; | &nbsp; 
    <b>Волна:</b> ${k}${M>0?` (через ${M.toFixed(1)}с)`:""} &nbsp; | &nbsp;
    <b>HP:</b> ${w} &nbsp; | &nbsp; <b>Урон дробовика:</b> L${F}
  `,T.textContent=`Время выживания: ${at(me)}`}function at(e){const t=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/3600),i=a=>a.toString().padStart(2,"0");return`${i(o)}:${i(n)}:${i(t)}`}function rt(e){if(K){if($===0&&R.length===0&&M===0){M=2;for(let t=0;t<40;t++)S.push({pos:{...r.pos},vel:{x:c(-260,260),y:c(-260,260)},life:c(.3,.7),color:"rgba(120,200,255,1)",size:c(1,3)})}M>0&&(M=Math.max(0,M-e),M===0&&Le())}}function ce(){const e=Math.min(window.devicePixelRatio||1,2);if(s.save(),u.shake>0){const f=u.shake;s.translate(c(-6,6)*f,c(-6,6)*f)}if(s.clearRect(0,0,h.width,h.height),s.fillStyle="#0b1020",s.fillRect(0,0,h.width,h.height),X.isReady()){const f=X.get(),y=Math.min(window.devicePixelRatio||1,2),b=h.width/2,B=h.height/2,Z=f.naturalWidth||f.width,J=f.naturalHeight||f.height,z=Math.round(Z*y),Q=Math.round(J*y),oe=Math.floor(-u.pos.x*y+b),Ve=Math.floor(-u.pos.y*y+B);for(let ie=-1;ie<=1;ie++)for(let ae=-1;ae<=1;ae++){const We=oe+ae*z,De=Ve+ie*Q;s.drawImage(f,We,De,z,Q)}}for(const f of S){const y=D(f.pos),b=P(f.life*4,0,1);s.fillStyle=f.color.replace(",1)",`,${b})`),s.beginPath(),s.arc(y.x,y.y,f.size*e,0,Math.PI*2),s.fill()}for(const f of R){const y=D(f.pos),b=(f.radius*N+(f.spawnFx>0?Math.sin((.4-f.spawnFx)*20)*4:0))*e;if(be.isReady()){const oe=be.get();s.drawImage(oe,y.x-b,y.y-b,b*2,b*2)}else s.fillStyle="#ff5252",s.beginPath(),s.arc(y.x,y.y,b,0,Math.PI*2),s.fill(),s.strokeStyle="rgba(255,255,255,0.12)",s.stroke();const B=b*2,Z=4*e,J=y.x-B/2,z=y.y-b-8*e;s.fillStyle="rgba(0,0,0,0.5)",s.fillRect(J,z,B,Z);const Q=P(f.hp/f.maxHp,0,1);s.fillStyle="#e74c3c",s.fillRect(J,z,B*Q,Z)}const t=D(r.pos);s.save(),s.translate(t.x,t.y);const n=r.radius*N*e;if(Te.isReady()){const f=Te.get();s.drawImage(f,-n,-n,n*2,n*2)}else s.fillStyle="#7ad0ff",s.beginPath(),s.moveTo(n,0),s.lineTo(-n*.6,n*.75),s.lineTo(-n*.4,0),s.lineTo(-n*.6,-n*.75),s.closePath(),s.fill(),s.strokeStyle="rgba(255,255,255,0.2)",s.stroke();s.restore();const o=r.radius*N*e,i=o*2,a=5*e,l=t.x-i/2,p=t.y-o-10*e;s.fillStyle="rgba(0,0,0,0.5)",s.fillRect(l,p,i,a),s.fillStyle="#e74c3c",s.fillRect(l,p,i*P(w/100,0,1),a);const x=j(m.mouse),H=_(q(x,r.pos)),W=Math.atan2(H.y,H.x),Ce=r.radius*N*e+8;s.strokeStyle="#ffd166",s.lineWidth=2.5*e,s.beginPath();const ye=Math.PI/8;s.arc(t.x,t.y,Ce,W-ye,W+ye),s.stroke(),s.fillStyle="#ffd27a";for(const f of A){const y=D(f.pos);s.beginPath(),s.arc(y.x,y.y,3*e,0,Math.PI*2),s.fill()}s.restore(),lt(e),ft(e),pt(e),ut(e)}let he=[];function ct(){const e=h.width,t=h.height,n=180;he=new Array(n).fill(0).map(()=>({x:Math.random()*(e+200)-100,y:Math.random()*(t+200)-100,vx:-120,vy:700+Math.random()*300,len:10+Math.random()*12}))}function lt(e){const t=h.width,n=h.height;he.length===0&&ct(),s.save(),s.globalAlpha=.28,s.strokeStyle="rgba(160,180,210,0.85)",s.lineWidth=Math.max(1,1*e);for(const o of he)s.beginPath(),s.moveTo(o.x,o.y),s.lineTo(o.x+o.vx*.05,o.y+o.len*e),s.stroke(),o.x+=o.vx*(1/60),o.y+=o.vy*(1/60),o.y-o.len>n+120&&(o.y=-120,o.x=Math.random()*(t+200)-100),o.x<-150&&(o.x=t+150);s.restore(),re-=1/60,re<=0&&(re=c(8,16),Math.random()<.5&&(G=1,Re.playThunder())),G>0&&(s.fillStyle=`rgba(255,255,255,${G})`,s.fillRect(0,0,t,n),G=Math.max(0,G-.08))}function ut(e){const t=D(r.pos),n=h.width,o=h.height,i=Math.max(140*e,(r.radius*N+50)*e),a=Math.min(Math.max(n,o)*.75,i*2.4),l=s.createRadialGradient(t.x,t.y,i,t.x,t.y,a);l.addColorStop(0,"rgba(0,0,0,0)"),l.addColorStop(.6,"rgba(0,0,0,0.35)"),l.addColorStop(1,"rgba(0,0,0,0.85)"),s.fillStyle=l,s.fillRect(0,0,n,o)}function ve(e){const n={x:P(c(40,d.w-40),0,d.w),y:P(c(40,d.h-40),0,d.h)};C.push({pos:n,radius:18,kind:e})}function ht(e){le-=e,ue-=e;const t=C.filter(o=>o.kind==="medkit").length,n=C.filter(o=>o.kind==="damage").length;if(le<=0&&t<2&&(ve("medkit"),Se()),ue<=0&&n<1){const a=Math.max(.2,.6-F*.03);Math.random()<a&&(ve("damage"),Re.playChime()),Pe()}for(let o=C.length-1;o>=0;o--){const i=C[o];ne(q(i.pos,r.pos))<i.radius+r.radius&&(i.kind==="medkit"?(w=Math.min(100,w+35),E.playWave()):i.kind==="damage"&&(F=F+1,de=1+F,E.playWave()),C.splice(o,1))}}function ft(e){for(const t of C){const n=D(t.pos),o=28*e,i=18*e,a=n.x-o/2,l=n.y-i/2;if(t.kind==="medkit"){ke(a,l,o,i,6*e,"rgba(255,255,255,0.95)","rgba(0,0,0,0.35)"),s.fillStyle="#d33";const p=n.x,x=n.y;s.fillRect(p-2*e,x-6*e,4*e,12*e),s.fillRect(p-6*e,x-2*e,12*e,4*e)}else ke(a,l,o,i,6*e,"rgba(0,0,0,0.85)","rgba(255,255,255,0.35)"),s.fillStyle="#ff4444",s.beginPath(),s.moveTo(n.x,l+4*e),s.lineTo(n.x-6*e,l+i-4*e),s.lineTo(n.x+6*e,l+i-4*e),s.closePath(),s.fill()}}function ke(e,t,n,o,i,a,l){s.beginPath(),s.moveTo(e+i,t),s.arcTo(e+n,t,e+n,t+o,i),s.arcTo(e+n,t+o,e,t+o,i),s.arcTo(e,t+o,e,t,i),s.arcTo(e,t,e+n,t,i),s.closePath(),s.fillStyle=a,s.fill(),l&&(s.strokeStyle=l,s.stroke())}function pt(e){s.save();for(const t of U){const n=D(t.pos),o=P(t.life/1.4,0,1);s.font=`bold ${28*e}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.lineWidth=4*e,s.strokeStyle=`rgba(0,0,0,${o})`,s.strokeText(t.text,n.x,n.y),s.fillStyle=`rgba(255,230,90,${o})`,s.fillText(t.text,n.x,n.y)}s.restore()}function mt(){E.ensure?.();const e=E.ctx,t=E.master;if(!e||!t)return;const n=e.createOscillator();n.type="square",n.frequency.setValueAtTime(200,e.currentTime),n.frequency.exponentialRampToValueAtTime(80,e.currentTime+.08);const o=e.createGain();o.gain.setValueAtTime(.6,e.currentTime),o.gain.exponentialRampToValueAtTime(.001,e.currentTime+.12),n.connect(o).connect(t),n.start(),n.stop(e.currentTime+.13);const i=.2*e.sampleRate,a=e.createBuffer(1,i,e.sampleRate),l=a.getChannelData(0);for(let W=0;W<i;W++)l[W]=(Math.random()*2-1)*(1-W/i);const p=e.createBufferSource();p.buffer=a;const x=e.createBiquadFilter();x.type="highpass",x.frequency.value=800;const H=e.createGain();H.gain.setValueAtTime(.6,e.currentTime),H.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),p.connect(x).connect(H).connect(t),p.start(),p.stop(e.currentTime+.21)}function dt(){K=!1,I.style.display="block",I.innerHTML=`<h1>Вы погибли</h1><p>Очки: ${Y}, Волна: ${k}</p><a class="btn" href="#">Играть снова</a>`,A.length=0,R.length=0,S.length=0,C.length=0,r.pos={x:d.w/2,y:d.h/2},u.pos={x:r.pos.x,y:r.pos.y},u.shake=0,Y=0,k=0,w=100,F=0,de=1,Se(),Pe(),me=0,$=0,O=0,M=0,E.playDeath()}function ee(e){const t=Math.min(.033,(e-we)/1e3);if(we=e,!K){ce(),requestAnimationFrame(ee);return}if(te){ce(),requestAnimationFrame(ee);return}const n=t*je;me+=n,Ke(n),st(n),Je(n),Qe(n),et(),tt(n),ht(n),nt(n),ot(n),it(),rt(n),w<=0&&dt(),ce(),requestAnimationFrame(ee)}requestAnimationFrame(ee);
//# sourceMappingURL=index-CvK50Vq-.js.map
